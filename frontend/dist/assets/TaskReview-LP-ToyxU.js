import{d as R,f as V,h as z,r as F}from"./task-BMeBlA8s.js";import{d as j,r as C,k as L,c as _,a as t,f as q,p as I,h as P,q as Y,F as y,n as b,o as i,x as m,b as s,g as p,w as l,e as n,L as D,E as x,_ as G}from"./index-D0gD-nMH.js";const H={class:"task-review"},J={class:"review-list"},K={class:"task-info"},O={class:"task-meta"},Q={class:"reward"},U={class:"pending-members"},W={class:"member-info"},X={class:"member-name"},Z={class:"member-email"},ee={class:"member-actions"},te=j({__name:"TaskReview",setup(se){const v=C(!1),f=C([]);L(async()=>{await g()});async function g(){v.value=!0;try{const e=(await R(1)).data||[],c=[];for(const r of e){const u=(await V(r.id)).data;u&&w(u).length>0&&c.push(u)}f.value=c}finally{v.value=!1}}function w(a){var e;return((e=a.members)==null?void 0:e.filter(c=>c.status===0))||[]}async function M(a,e){await D.confirm("确认通过该成员的认领申请？任务将进入进行中状态。","确认审核"),await z(a,e),x.success("审核通过"),await g()}async function T(a,e){await D.confirm("确认拒绝该成员的认领申请？","确认拒绝"),await F(a,e),x.success("已拒绝"),await g()}function N(a){const e=new Date(a);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}return(a,e)=>{const c=n("Coin"),r=n("el-icon"),k=n("Calendar"),u=n("el-avatar"),B=n("Check"),h=n("el-button"),E=n("Close"),S=n("el-empty"),$=I("loading");return i(),_("div",H,[e[2]||(e[2]=t("h1",{class:"page-title"},"审核中心",-1)),e[3]||(e[3]=t("p",{class:"page-desc"},"审核成员的任务认领申请",-1)),q((i(),_("div",J,[(i(!0),_(y,null,b(f.value,o=>(i(),_("div",{key:o.id,class:"review-card"},[t("div",K,[t("h3",null,m(o.title),1),t("div",O,[t("span",Q,[s(r,null,{default:l(()=>[s(c)]),_:1}),p(" "+m(o.reward)+" 积分",1)]),t("span",null,[s(r,null,{default:l(()=>[s(k)]),_:1}),p(" 截止："+m(N(o.deadline)),1)])])]),t("div",U,[(i(!0),_(y,null,b(w(o),d=>(i(),_("div",{key:d.id,class:"member-row"},[s(u,{size:40},{default:l(()=>[p(m(d.memberName.charAt(0)),1)]),_:2},1024),t("div",W,[t("span",X,m(d.memberName),1),t("span",Z,m(d.memberEmail),1)]),t("div",ee,[s(h,{type:"success",size:"small",onClick:A=>M(o.id,d.id)},{default:l(()=>[s(r,null,{default:l(()=>[s(B)]),_:1}),e[0]||(e[0]=p(" 通过 ",-1))]),_:1},8,["onClick"]),s(h,{type:"danger",size:"small",onClick:A=>T(o.id,d.id)},{default:l(()=>[s(r,null,{default:l(()=>[s(E)]),_:1}),e[1]||(e[1]=p(" 拒绝 ",-1))]),_:1},8,["onClick"])])]))),128))])]))),128)),!v.value&&f.value.length===0?(i(),P(S,{key:0,description:"暂无待审核任务"})):Y("",!0)])),[[$,v.value]])])}}}),oe=G(te,[["__scopeId","data-v-ad7b5ad0"]]);export{oe as default};
